'use client';
import { useEffect, useState } from 'react';
import { usePathname } from 'next/navigation';
import Link from 'next/link';
import styles from './styles.module.scss';

const links = [
  {
    name: 'OBRAZY',
    href: '/#obrazy'
  },
  {
    name: 'MURALE',
    href: '/#murale'
  },
  {
    name: 'O ARTYŚCIE',
    href: '/#artysta'
  },
  {
    name: 'KONTAKT',
    href: '/#kontakt'
  },
]

const Header = ({ socials }) => {
  const pathname = usePathname();
  const [navOpened, setNavOpened] = useState(false);

  const handleEscapeKey = (e) => {
    if (e.key === "Escape") {
      setNavOpened(false);
    }
  }
  useEffect(() => {
    document.addEventListener('keydown', handleEscapeKey);
    return () => {
      document.removeEventListener('keydown', handleEscapeKey);
    }
  }, []);

  return (
    <>
      <a href="#main" className={styles.skipToMainContent}>Przejdź do głównej treści</a>
      <header
        className={styles.wrapper}
        aria-expanded={navOpened}
      >
        <div className="max-width">
          <Link
            href='/'
            className={styles.logo}
            aria-label="Strona główna"
          >
            <Logo />
          </Link>
          <nav>
            <ul className={styles.links}>
              {links.map(({ name, href }, i) => (
                <li key={i}>
                  <Link
                    onClick={() => setNavOpened(false)}
                    href={href}
                    {...(pathname === '/' && {
                      href: href.replace(/^\//, ''),
                      'data-scroll-to': true,
                      'data-scroll-to-offset': -123,
                    })}
                  >
                    <span aria-hidden={true}>{name}</span>
                    <span>{name}</span>
                  </Link>
                </li>
              ))}
            </ul>
            {socials.length > 0 && (
              <ul className={styles.socials}>
                {socials.map(({ name, url, icon }, i) => (
                  <li key={i}>
                    <a
                      href={url}
                      target='_blank'
                      rel="noopener"
                      onClick={() => setNavOpened(false)}
                      aria-label={name}
                    >
                      {icon}
                    </a>
                  </li>
                ))}
              </ul>
            )}
          </nav>
          <button
            className={styles.mobileNavToggle}
            onClick={() => setNavOpened(!navOpened)}
            aria-label={`${navOpened ? 'Schowaj' : 'Pokaż'} nawigację`}
          >
            <span></span>
            <span></span>
          </button>
        </div>
      </header>
      <div
        className={styles.overlay}
        aria-hidden="true"
        onClick={() => setNavOpened(false)}
      />
    </>
  );
};

export default Header;

const Logo = () => (
  <svg
    xmlns='http://www.w3.org/2000/svg'
    width='152'
    height='49'
    fill='currentColor'
    viewBox='0 0 152 49'
  >
    <path
      d='M28.4 23.888h.288v.24c-.448.064-.952.096-1.512.096-.544 0-1.224-.12-2.04-.36-.8-.24-1.528-.688-2.184-1.344-1.344-1.344-2.16-3.088-2.448-5.232L19.04 6.608l-4.992 11.28c-.448.976-.72 1.792-.816 2.448h-.24L6.776 6.824 5.72 18.752a.869.869 0 00.24.72c.208.208.432.312.672.312h.384V20H2.36v-.24h.384c.432 0 .808-.128 1.128-.384.336-.272.544-.624.624-1.056L6.008 5.216C4.6 2.448 2.912 1.064.944 1.064c-.176 0-.36.008-.552.024v-.24C.824.736 1.176.68 1.448.68s.568.016.888.048c.32.016.696.088 1.128.216.432.128.84.32 1.224.576.384.24.72.496 1.008.768.288.256.56.544.816.864.432.576.776 1.128 1.032 1.656l5.784 12.528 6.456-14.472H20l2.232 14.208c.336 2.24 1.056 3.936 2.16 5.088 1.12 1.152 2.456 1.728 4.008 1.728z'
    ></path>
    <path
      d='M41.28 19.76h.192V20h-5.4v-.24h.216c.336 0 .584-.104.744-.312.176-.224.264-.432.264-.624s-.032-.384-.096-.576l-1.536-4.08h-6.48l-1.608 4.104a1.812 1.812 0 00-.096.576c0 .176.08.376.24.6.176.208.432.312.768.312h.216V20H23.88v-.24h.216c.4 0 .792-.128 1.176-.384.384-.256.696-.632.936-1.128l5.424-12.912c.592-1.296.888-2.12.888-2.472h.216l6.432 15.384c.224.496.528.872.912 1.128.384.256.784.384 1.2.384zm-11.808-6.312h5.904l-2.88-7.704-3.024 7.704zm17.854-9.504H45.79v14.304c0 .416.144.776.432 1.08.304.288.672.432 1.104.432h.288l.024.24h-5.256v-.24h.312c.416 0 .768-.144 1.056-.432.304-.288.464-.64.48-1.056V4.952a1.482 1.482 0 00-.48-1.056 1.399 1.399 0 00-1.056-.456h-.312V3.2h6.48c1.456 0 2.6.408 3.432 1.224.832.8 1.248 1.848 1.248 3.144 0 1.28-.4 2.392-1.2 3.336-.784.928-1.744 1.392-2.88 1.392.24.112.52.336.84.672.336.32.632.656.888 1.008 1.376 1.968 2.272 3.184 2.688 3.648.416.448.712.76.888.936.176.16.368.32.576.48.208.16.416.288.624.384.464.224.96.336 1.488.336V20h-1.32c-.688 0-1.328-.12-1.92-.36-.592-.256-1.04-.512-1.344-.768a17.344 17.344 0 01-.768-.768c-.208-.256-.8-1.088-1.776-2.496s-1.544-2.208-1.704-2.4a9.084 9.084 0 00-.504-.6c-.512-.544-1.024-.816-1.536-.816v-.24c.128.016.296.024.504.024.208 0 .464-.008.768-.024 1.984-.048 3.232-.88 3.744-2.496.096-.32.144-.616.144-.888v-.552c-.032-1.072-.312-1.936-.84-2.592-.528-.656-1.24-1.008-2.136-1.056a35.66 35.66 0 00-1.44-.024zM57.97 19.76c.416 0 .768-.144 1.056-.432.304-.304.464-.664.48-1.08V4.808c0-.384-.152-.704-.456-.96a1.566 1.566 0 00-1.08-.408h-.288l-.024-.24h7.032a9.82 9.82 0 001.608-.144c.592-.096 1.008-.192 1.248-.288v3.024h-.24V5.36c0-.384-.136-.712-.408-.984a1.32 1.32 0 00-.936-.432h-4.896v7.416h4.056a1.2 1.2 0 00.816-.36 1.14 1.14 0 00.336-.84v-.336h.24v3.792h-.24v-.36c0-.32-.112-.592-.336-.816a1.114 1.114 0 00-.792-.36h-4.08v7.176h3.432c1.184 0 2.088-.264 2.712-.792.624-.528 1.144-1.312 1.56-2.352h.24L67.618 20h-9.96v-.24h.312zm18.009 0h.312V20h-5.256v-.24h.312c.416 0 .768-.144 1.056-.432.304-.304.464-.664.48-1.08V4.928a1.482 1.482 0 00-.48-1.056 1.436 1.436 0 00-1.056-.432h-.312V3.2h5.256v.24h-.312a1.518 1.518 0 00-1.536 1.488v13.32c0 .416.152.776.456 1.08.304.288.664.432 1.08.432zm9.648.24h-1.032c-1.632 0-2.832-.456-3.6-1.368l-5.784-6.984 5.664-7.104c.128-.16.192-.304.192-.432a.742.742 0 00-.072-.336c-.128-.24-.36-.36-.696-.36h-.24V3.2h5.064v.216h-.096c-1.056 0-1.92.376-2.592 1.128l-5.64 6.528 6.552 7.704c.64.64 1.4.968 2.28.984V20zM56.4 46.888h.288v.24c-.448.064-.952.096-1.512.096-.544 0-1.224-.12-2.04-.36-.8-.24-1.528-.688-2.184-1.344-1.344-1.344-2.16-3.088-2.448-5.232l-1.464-10.68-4.992 11.28c-.448.976-.72 1.792-.816 2.448h-.24l-6.216-13.512-1.056 11.928a.869.869 0 00.24.72c.208.208.432.312.672.312h.384V43H30.36v-.24h.384c.432 0 .808-.128 1.128-.384.336-.272.544-.624.624-1.056l1.512-13.104c-1.408-2.768-3.096-4.152-5.064-4.152-.176 0-.36.008-.552.024v-.24c.432-.112.784-.168 1.056-.168s.568.016.888.048c.32.016.696.088 1.128.216.432.128.84.32 1.224.576.384.24.72.496 1.008.768.288.256.56.544.816.864.432.576.776 1.128 1.032 1.656l5.784 12.528 6.456-14.472H48l2.232 14.208c.336 2.24 1.056 3.936 2.16 5.088 1.12 1.152 2.456 1.728 4.008 1.728z'
    ></path>
    <path
      d='M54.952 25.384c1.04-.432 2.04-.648 3-.648.8 0 1.624.296 2.472.888.464.32.984.944 1.56 1.872.384.64.872 1.8 1.464 3.48l2.928 8.304c.672 1.856 1.352 3.328 2.04 4.416.704 1.104 1.344 1.928 1.92 2.472.576.56 1.176.952 1.8 1.176.624.224 1.136.336 1.536.336.416 0 .784-.032 1.104-.096l.024.24a7.11 7.11 0 01-2.256.384c-.736 0-1.472-.192-2.208-.576-.736-.368-1.424-.888-2.064-1.56-1.376-1.392-2.544-3.512-3.504-6.36l-.936-2.736h-6.576L55.6 41.248c-.08.192-.12.384-.12.576 0 .192.08.4.24.624.176.208.44.312.792.312h.192V43H51.88v-.24h.216c.384 0 .76-.112 1.128-.336.368-.24.672-.592.912-1.056l5.952-14.256c-.864-1.232-1.936-1.848-3.216-1.848-.576 0-1.192.12-1.848.36l-.072-.24zm2.568 10.872h6.072l-1.896-5.592c-.368-1.072-.704-1.912-1.008-2.52l-3.168 8.112zm8.6-5.28c-.496-.592-.744-1.176-.744-1.752 0-.592.136-1.096.408-1.512.272-.432.712-.792 1.32-1.08.608-.304 1.296-.456 2.064-.456h9.84c.496 0 1.04-.048 1.632-.144.608-.096 1.032-.192 1.272-.288v3.024l-.24-.024v-.408c0-.384-.136-.712-.408-.984a1.366 1.366 0 00-.96-.456h-4.56v14.376c.016.576.272 1.008.768 1.296.24.128.496.192.768.192h.312V43h-5.256v-.24h.312c.416 0 .768-.144 1.056-.432.304-.288.464-.632.48-1.032v-14.4h-5.016c-1.28 0-2.208.408-2.784 1.224-.304.416-.456.856-.456 1.32 0 .448.128.92.384 1.416l-.192.12zM83.86 42.76c.416 0 .768-.144 1.056-.432.304-.304.464-.664.48-1.08v-13.44c0-.384-.152-.704-.456-.96a1.566 1.566 0 00-1.08-.408h-.288l-.024-.24h4.872a9.82 9.82 0 001.608-.144c.592-.096 1.008-.192 1.248-.288v3.024h-.24v-.432c0-.384-.136-.712-.408-.984a1.32 1.32 0 00-.936-.432h-2.736v7.416h4.56a1.2 1.2 0 00.816-.36 1.14 1.14 0 00.336-.84v-.336h.24v3.792h-.24v-.36c0-.32-.112-.592-.336-.816a1.114 1.114 0 00-.792-.36h-4.584v7.176h5.112c1.184 0 2.088-.264 2.712-.792.624-.528 1.144-1.312 1.56-2.352h.24L95.188 43h-11.64v-.24h.312zm33.64-20.688h.408v.24c-1.76 0-3.152.584-4.176 1.752-1.024 1.152-1.536 2.824-1.536 5.016v7.992c0 1.872-.592 3.384-1.776 4.536-1.184 1.152-2.76 1.728-4.728 1.728s-3.568-.568-4.8-1.704c-1.216-1.152-1.824-2.664-1.824-4.536v-9.48c0-.464-.208-.808-.624-1.032a1.429 1.429 0 00-.648-.144h-.384v-.24h4.872v.24h-.384c-.352 0-.648.112-.888.336-.24.208-.368.48-.384.816v9.168c0 1.744.464 3.152 1.392 4.224.944 1.056 2.176 1.584 3.696 1.584 1.616 0 2.912-.504 3.888-1.512s1.464-2.336 1.464-3.984v-7.968c0-2.352.592-4.112 1.776-5.28 1.2-1.168 2.752-1.752 4.656-1.752zm.125 14.544c-.832 1.088-1.248 2.264-1.248 3.528 0 1.504.632 2.672 1.896 3.504.736.496 1.568.744 2.496.744.944 0 1.76-.184 2.448-.552 1.296-.672 2.024-1.8 2.184-3.384.016-.112.024-.224.024-.336 0-.592-.168-1.232-.504-1.92-.32-.688-.848-1.32-1.584-1.896l-4.32-3.408c-.944-.736-1.416-1.688-1.416-2.856s.376-2.152 1.128-2.952c.752-.816 1.768-1.224 3.048-1.224.64 0 1.336.08 2.088.24h.96l.048 2.952h-.24c-.016-.768-.296-1.368-.84-1.8-.528-.448-1.2-.672-2.016-.672-.8 0-1.472.272-2.016.816-.544.528-.816 1.216-.816 2.064 0 .832.352 1.528 1.056 2.088l4.44 3.504c1.76 1.392 2.64 3.072 2.64 5.04 0 1.472-.584 2.736-1.752 3.792-1.008.912-2.352 1.368-4.032 1.368-1.024 0-1.936-.192-2.736-.576-1.504-.704-2.408-1.904-2.712-3.6a5.34 5.34 0 01-.072-.96c0-.4.112-.936.336-1.608.224-.688.656-1.376 1.296-2.064l.216.168zm33.98 8.52c-1.488 1.728-3.488 2.592-6 2.592-1.92 0-3.88-.336-5.88-1.008-2.272-.768-4.064-1.44-5.376-2.016-2.464-1.088-4.104-1.656-4.92-1.704h-.288v-.216l10.08-15.888h-8.088c-.544.016-.952.256-1.224.72a1.428 1.428 0 00-.192.72v.432h-.24v-3.024c.24.096.664.192 1.272.288.608.096 1.024.144 1.248.144h7.08c.672 0 1.24-.04 1.704-.12.464-.08.744-.144.84-.192v.216l-10.488 16.56c.144.032 1 .304 2.568.816 5.472 1.792 9.528 2.688 12.168 2.688 2.032 0 3.904-.4 5.616-1.2l.12.192z'
    ></path>
  </svg>
)
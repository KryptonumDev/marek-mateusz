import { Social } from '@/components/atoms/Icons';
import Form from './Form';
import styles from './styles.module.scss';
import Markdown from '@/components/atoms/Markdown';
import fetchData from '@/utils/fetchData';

const Contact = async ({
  heading,
  paragraph,
  works
}) => {
  const {
    global: { instagram, facebook, phoneNumber }
  } = await query();
  const createSocial = (name, url, icon) => (url ? { name, url, icon } : null);
  const socials = [
    createSocial('Instagram', instagram, <Social.Instagram />),
    createSocial('Facebook', facebook, <Social.Facebook />),
  ].filter(Boolean);

  const phone = (
    <p
      className={styles.phone}
    >
      <Phone />
      <a
        href={`tel:${phoneNumber}`}
        className='link'
      >{phoneNumber}</a>
    </p>
  );

  return (
    <section className={styles.wrapper} id="kontakt">
      <header>
        <Markdown.h2>{heading}</Markdown.h2>
        <Markdown>{paragraph}</Markdown>
      </header>
      <Form socials={socials} phone={phone} works={works} />
      <Decoration1 className={styles.decoration1} />
      <Decoration2 className={styles.decoration2} />
    </section>
  );
};

export default Contact;

const query = async () => {
  const { body: { data } } = await fetchData(`
    query {
      global: Global(id: "global") {
        instagram
        facebook
        phoneNumber: phone
      }
    }
  `)
  return data;
}

const Decoration1 = ({ ...props }) => (
  <svg
    xmlns='http://www.w3.org/2000/svg'
    fill='none'
    viewBox='-98.12 19.39 420.15 497.24'
    {...props}
  >
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M82.334 335.106c-1.647 2.254-33.837 46.494-38.578 89.232m7.187-77.09c-8.722 14.309-25.727 51.674-23.969 86.662m22.906-12.66c14.26 7.807 62.57 22.141 141.741 17.02m-154.709-9.624c15.605 9.634 65.062 27.432 138.055 21.549m-158.074-10.03c26.78 10.202 93.315 28.364 145.213 19.387m-136.9-101.063c-6.277 12.275-17.568 46.233-12.519 83.873'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M10.192 443.482c19.72 12.949 75.129 36.006 139.011 24.643m-138.94-98.788C7.12 386.16.643 425.676-.117 449.159m-5.753-65.566c-3.605 9.571-9.42 37.723-3.828 73.76'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M.568 450.891c21.903 10.929 79.31 31.923 133.714 28.473m-146.618-19.9c26.08 14.174 89.305 39.911 133.572 29.464'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M-19.878 465.384c27.506 15.079 90.492 42.913 122.393 33.615m-122.384-98.121c-2.438 15.342-5.737 49.676.569 64.277m-8.47 6.954c14.148 10.566 52.656 32.87 93.503 37.557m-104.631-28.885c8.815 10.137 38.375 30.663 86.1 31.669m77.586-131.092c13.804 4.292 56.021 11.722 114.451 7.108m-125.502-.604c11.695 5.26 52.083 13.787 120.085 5.817'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M227.007 402.115c-30.527 3.965-98.18 7.773-124.57-8.718m39.509-68.633c-18.885 14.275-58.054 50.297-63.656 80.181m138.894 8.131c-30.767 4.371-100.263 8.516-132.106-9.879m25.418-74.549c-13.581 16.542-42.629 56.887-50.164 85.933m145.404 12.101c-36.215 1.851-114.917 1.649-140-13.97m75.777-38.367c23.397 4.685 76.574 12.84 102.11 7.981m-62.433-55.581c-19.725 10.913-61.262 38.399-69.62 61.039m52.194-63.231c-19.985 14.532-62.226 49.542-71.308 73.324m108.043-66.879c-14.523 4.138-48.08 19.112-66.122 45.901m31.533-13.132c17.336 5.344 57.68 15.447 80.364 13.104m-25.468-37.741c-11.341 2.39-37.06 9.894-49.207 20.786m62.513-14.828c-8.454 1.249-26.477 4.91-30.943 9.56-4.465 4.65 28.991 14.67 46.278 19.1'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M244.957 349.214c-5.152.479-16.013 2.056-18.237 4.538 6.313 5.161 20.648 15.075 27.481 13.442'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M-41.273 440.989c1.474 9.674-5.121 38.17-8.603 51.209 2.92-1.261 11.556 1.531 15.508 3.084 13.873 9.462 30.67 17.791 41.037 20.37 8.294 2.063 41.525-3.059 57.103-5.879 20.671-1.761 43.377-12.338 52.146-17.407l80.051-57.283c9.548-6.659 35.239-37.656 46.891-52.322l19.945-27.247c-6.971-.878-28.755-10.357-38.776-14.987-23.309-11.94-38.657-14.011-43.417-13.553-30.181-5.271-70.489.843-86.87 4.558-12.874 3.379-42.737 15.647-56.06 21.358-35.191 10.973-80.797 76.007-78.955 88.099z'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M262.064 356.341c-19.67-2.464-66.179-4.716-94.857 5.978-10.779 4.261-42.805 18.47-84.667 41.214-36.636 18.131-114.4 61.405-132.373 89.449M213.902 32.301l-20.371 35.236c-2.033 2.6-6.682 10.439-9.016 21-2.335 10.562-13.351 18.509-18.567 21.162m143.767 79.879c-12.98 3.016-41.229 9.277-50.385 10.196-11.445 1.148-46.014 10.919-61.223 16.307m112.59 37.099c-17.889 2.693-56.964 7.474-70.155 5.058m-137.453-63.273c12.533-14.211 36.728-53.054 33.239-94.738m5.466 44.667c12.001-32.281 35.618-101.226 34.076-118.769M93.176 35.74c.097 2.171 1.816 9.903 7.908 23.464 6.092 13.56 6.575 19.428 6.055 20.667M74.62 40.53c3.34 7.4 10.163 24.598 10.733 34.2m4.407-13.385l8.243 26.193'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M89.748 221.785c11.679-15.702 30.722-61.789 13.46-120.528m15.961 146.899c7.198 2.562 24.136 7.877 34.304 8.648 10.169.77 19.41.815 22.759.741 1.975-.326 7.274.167 12.67 4.746 5.396 4.578 27.82 2.305 38.357.595m73.019-117.489c-11.788 1.778-37.345 6.434-45.27 10.829-7.924 4.395-24.342 8.268-31.56 9.655m-91.234 26.276c6.658-4.592 22.223-17.63 31.218-33.036 6.424-5.824 23.475-19.748 40.293-28.858 16.818-9.11 31.929-23.805 37.381-30.013M44.6 42.189c-.629 3.099-1.083 10.912 2.125 17.37s7.412 19.41 9.114 25.079c2.309 2.404 7.778 9.223 11.18 17.27'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M-97.618 357.8l.354-.169m0 0c53.123-25.403 163.108-88.754 180.915-140.39 4.566-14.831 8.078-49.245-14.397-68.256-28.095-23.764-43.834-28.89-45.047-63.499-1.212-34.609 3.457-41.729 19.339-43.672 15.881-1.944 11.987-7.008 31.013-1.78 3.892-1.82 13.062-5.226 18.617-4.293 2.844-4.882 10.61-14.144 18.916-12.138 10.381 2.508 20.636 6.038 22.869 5.765 2.233-.273 9.997-4.75 14.676-3.559 4.68 1.19 3.121-7.434 26.669-.241 3.771-3.484 14.064-8.975 25.063-3.067 13.748 7.385 12.138 6.574 12.563 10.048 2.527-1.988 9.389-4.372 16.616 1.997 9.034 7.962 17.481 2.898 22.322 13.64 2.118.16 6.893 1.171 9.044 3.93 2.151 2.76 5.319 1.616 6.634.7 1.931.687 6.552 3.731 9.586 10.412 3.034 6.681-1.805 6.518-4.604 5.601 4.401.973 11.562 3.925 5.003 7.951.513 1.449 2.655 4.41 7.12 4.67 4.464.26 5.147 15.993 4.931 23.828-.988 2.219-2.916 7.459-2.726 10.66.19 3.2-7.166 5.242-10.868 5.863-5.947 1.483-18.662 5.155-21.944 7.974-4.102 3.525-28.188 12.517-34.185 17.029-4.797 3.609-18.306 8.201-24.461 10.045-8.02 3.752-20.513 11.023-6.321 10.093 14.192-.931 32.14-5.612 39.34-7.837 4.024-1.416 13.42-4.765 18.809-6.835 6.735-2.587 32.914-17.124 40.09-22.284 5.741-4.128 10.525 2.993 12.199 7.07.461 1.707 1.028 5.516-.39 7.1l2.364 9.03c1.576 6.02 4.354 19.113 2.854 23.326-1.499 4.213 1.468 7.88 3.139 9.187 2.488 5.236 7.479 17.068 7.539 22.501.061 5.432 2.813 11.325 4.182 13.592l1.276 10.423c.485 3.97-2.376 7.342-4.422 7.089-2.046-.253-6.164 9.318-5.799 12.296.364 2.977-5.102 18.002-10.652 17.926-4.44-.061-10.376 11.26-12.788 16.929.04 4.444-3.007 13.716-15.513 15.247-15.634 1.913-29.034 3.553-37.648 1.081-8.614-2.472-30.279 5.72-32.122-1.107-1.474-5.461-17.258-9.306-24.966-10.545-3.631 1.199-16.299.584-37.925-11.479-2.643-1.02-8.786-3.055-12.209-3.039-3.424.016-18.401-6.984-25.462-10.485-6.437-1.144-22.595-1.87-35.734 4.372-13.139 6.243-39.015 22.153-50.31 29.328l-113.195 57.803z'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M317.263 220.389c-27.59 5.055-83.885 14.295-88.341 10.81-4.456-3.484-28.514-5.242-39.987-5.685-28.866 2.861-92.29 13.107-115.061 31.207m60.252-228.006c3.504 3.936 9.91 14.302 7.503 24.268-2.407 9.966 1.507 24.666 3.765 30.77.101.828-.164 6.065-2.037 20.399s-2.005 31.644-1.836 38.508c-3.084 9.109-10.591 27.893-15.955 30.161-5.364 2.269-15.269 20.675-19.55 29.594l-33.174 45.869M268.457 52.071c-7.401 8.126-23.656 24.858-29.466 26.778-7.262 2.4-10.889 13.925-15.112 16.457-4.224 2.532-15.224 11.434-25.657 16.74-10.433 5.307-24.654 12.588-36.596 26.139-9.554 10.841-20.682 35.441-25.051 46.386-4.255 6.398-15.584 20.848-26.863 27.467'
    ></path>
  </svg>
)

const Decoration2 = ({ ...props }) => (
  <svg
    xmlns='http://www.w3.org/2000/svg'
    fill='none'
    viewBox='3.78 1.27 321.73 646.89'
    {...props}
  >
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M183.088 471.272c1.786 2.145 36.719 44.253 44.162 86.604m-12.064-76.479c9.613 13.727 28.954 49.938 29.42 84.967m-23.663-11.181c-13.735 8.696-61.039 26.067-140.375 25.981m153.786-19.423c-14.962 10.605-63.19 31.506-136.41 30.267m157.119-20.041c-26.078 11.881-91.326 34.228-143.69 28.563m130.211-109.547c7.044 11.851 20.467 45.025 17.816 82.909'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M261.962 574.851c-18.858 14.175-72.692 40.702-137.167 33.415m132.39-107.406c4.205 16.59 13.176 55.615 15.425 79.003m1.58-65.799c4.206 9.323 11.795 37.05 8.502 73.369'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M272.037 581.636c-21.166 12.296-77.125 36.891-131.638 36.901m145.059-29.165c-25.127 15.801-86.592 45.498-131.432 37.881'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M293.361 594.801c-26.493 16.795-87.586 48.57-120.013 41.315m115.91-105.69c3.407 15.156 8.878 49.212 3.512 64.184m8.894 6.402c-13.449 11.442-50.464 36.145-90.931 43.415m93.428-94.298c1.142 10.725 1.763 35.214-4.885 47.369m14.044 11.462c-8.154 10.676-36.352 33.037-83.918 37.07m-85.747-125.905c-13.504 5.159-55.164 15.254-113.77 14.357m125.211-8.567c-11.337 5.991-51.103 17.064-119.473 13.426'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M42.959 547.327c30.717 2.02 98.475 1.527 123.765-16.605m-43.784-65.989c19.752 13.049 61.129 46.512 68.615 75.981M53.458 557.642c30.982 2.411 100.601 2.137 131.213-18.242m-30.099-72.785c14.604 15.646 46.154 54.067 55.517 82.576M65.746 570.495c36.26-.451 114.789-5.647 138.831-22.826m-78.059-33.481c-23.053 6.16-75.605 17.673-101.398 14.444m58.78-59.43c20.377 9.639 63.576 34.433 73.353 56.498m-56.1-59.792c20.867 13.235 65.243 45.494 75.816 68.651M64.9 474.672c14.757 3.208 49.196 16.022 68.902 41.612m-32.303-11.105c-16.962 6.434-56.584 19.076-79.371 18.178m23.022-39.282c11.47 1.667 37.613 7.524 50.427 17.622M32.25 490.866c8.515.71 26.735 3.22 31.486 7.577 4.751 4.357-28.002 16.481-44.972 21.998'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M21.687 495.672c5.173.151 16.112 1.036 18.49 3.372-5.974 5.551-19.651 16.354-26.574 15.158'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M313.164 569.097c-.856 9.748 7.534 37.769 11.836 50.56-2.994-1.073-11.435 2.261-15.281 4.063-13.244 10.322-29.479 19.701-39.662 22.933-8.146 2.585-41.635-.419-57.361-2.244-20.741-.445-44.072-9.561-53.145-14.063l-83.525-52.087c-9.95-6.04-37.557-35.344-50.117-49.241L4.276 503.091c6.9-1.318 28.04-12.161 37.746-17.417 22.504-13.395 37.69-16.435 42.47-16.281 29.785-7.175 70.4-3.632 86.985-.964 13.061 2.556 43.643 12.903 57.301 17.758 35.817 8.717 85.457 70.726 84.386 82.91z'
    ></path>
    <path
      stroke='#E7CFA2'
      strokeLinecap='round'
      strokeOpacity='0.5'
      d='M5.068 503.87c19.474-3.707 65.746-8.906 95.045-.053 11.028 3.568 43.89 15.716 87.112 35.757 37.712 15.77 118.065 54.022 137.782 80.869M67.847 141.266C44.475 103.871 40.093 32.685 40.823 1.766c55.8 36.226 74.376 98.599 76.688 125.257 2.338 42.069 12.417 75.715 17.164 87.279 22.276 51.856 14.973-3.286 12.051-11.686-2.921-8.399.365-44.917 5.843-52.586 5.478-7.669 4.382-25.563 6.208-33.962 1.461-6.719 6.452-1.339 8.764 2.191 18.99 16.068 30.554 41.753 33.963 52.586 3.773 18.138 8.399 59.671-3.287 80.706-11.686 21.034-7.791 59.89-4.382 76.688 0 4.382 2.921 18.259 14.607 38.71 11.686 20.45 14.364 4.625 14.242-5.843 1.948-17.529 6.281-55.581 8.034-67.559 2.191-14.973 9.495-46.378 13.147-56.969 2.921-8.472 3.895-29.823 4.017-39.439 4.966-.293 11.564 21.545 14.242 32.501 0 10.517 1.948 18.989 2.921 21.911 4.967 11.978 7.913 32.988 8.765 41.996 4.09 33.597-18.259 73.889-29.945 89.835-12.563 21.911 4.017 42.483 13.877 50.03l55.508 67.924-4.017 3.652c-11.686-12.903-37.614-41.923-47.839-54.778-10.226-12.854-32.015-13.633-41.631-12.416-29.215 3.506-48.448-1.461-54.413-4.382-66.463-22.641-90.565-77.419-94.217-88.009-2.921-8.472 1.217-6.208 3.652-4.017 12.173 12.051 44.114 36.591 74.497 38.344 37.979 2.191 33.597 7.304 48.935 7.304 12.27 0 11.929-6.33 10.225-9.495-3.895-6.573-12.27-21.327-14.607-27.754-2.338-6.427-8.278-8.277-10.956-8.399-25.563-4.382-81.655-18.478-101.52-39.805-19.867-21.327-29.702-52.221-32.137-65.003.122-7.669.292-25.197 0-33.962-.292-8.764 12.295-.73 18.625 4.382 7.06 7.548 26.877 25.417 49.664 36.519 22.788 11.101 19.72-4.626 15.338-13.877-11.929-13.877-41.63-50.98-65.002-88.374z'
    ></path>
  </svg>
)

const Phone = () => (
  <svg
    xmlns='http://www.w3.org/2000/svg'
    width='24'
    height='24'
    fill='none'
    viewBox='0 0 24 24'
    stroke='currentColor'
  >
    <path
      strokeLinecap='round'
      d='M12.74 18.404l2.566-2.565a1 1 0 011.279-.113l3.55 2.476a1 1 0 01.135 1.528l-.386.386c-.71.71-1.73 1.018-2.685.71-2.065-.665-5.822-2.208-8.937-5.323-3.115-3.115-4.659-6.872-5.323-8.937-.308-.956 0-1.975.71-2.685l.386-.387a1 1 0 011.527.135L8.04 7.18a1 1 0 01-.113 1.28L5.36 11.023'
    ></path>
  </svg>
)